{"ast":null,"code":"import { Environment } from '../environments/environment';\nimport { Subject, interval, merge, switchMap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ApiService {\n  constructor(http) {\n    this.http = http;\n    this.serverEndpoint = `${Environment.apiUrl}`;\n    this.cartData$ = new Subject();\n    this.wishCountData$ = new Subject();\n    this.refreshInterval = 1000;\n    //atm stock \n    this.stateUrl = Environment.stateUrl;\n    // city\n    this.cityUrl = Environment.cityUrl;\n    // location\n    this.locationUrl = Environment.locationUrl;\n    // stock\n    this.stockUrl = Environment.stockUrl;\n    // pincode\n    this.pincodeUrl = Environment.pincodeUrl;\n    if (Environment.production) {\n      this.serverEndpoint = Environment.apiUrl;\n    }\n  }\n  /**\n   *\n   * @param endpoint\n   * @param data\n   * @param headers\n   */\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  post(endpoint, data, headers) {\n    return this.http.post(this.serverEndpoint + endpoint, data, headers);\n  }\n  /**\n   *\n   * @param endpoint\n   * @param params\n   */\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  get(endpoint, params) {\n    return this.http.get(this.serverEndpoint + endpoint, params);\n  }\n  liveprice() {\n    const endPoint = `/global/price/list`;\n    // return this.http.get(this.serverEndpoint + endPoint),interval(this.refreshInterval);\n    return merge(this.http.get(this.serverEndpoint + endPoint), interval(this.refreshInterval).pipe(switchMap(() => this.http.get(this.serverEndpoint + endPoint))));\n  }\n  /**\n   *\n   * @param endpoint\n   * @param params\n   */\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  delete(endpoint, params) {\n    return this.http.delete(this.serverEndpoint + endpoint, params);\n  }\n  /**\n   *\n   * @param endpoint\n   * @param params\n   */\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  put(endpoint, params) {\n    return this.http.put(this.serverEndpoint + endpoint, params);\n  }\n  getStates() {\n    return this.http.get(this.stateUrl);\n  }\n  getCities(state) {\n    return this.http.get(this.cityUrl + state);\n  }\n  getLocation(user_id) {\n    return this.http.get(this.locationUrl + user_id);\n  }\n  // getStock(atm_id: string): Observable<any> {\n  //   return this.http.get<any>(this.stockUrl+ atm_id);\n  // }\n  getStock(atmId) {\n    return this.http.get(`${this.stockUrl}${atmId}`);\n  }\n  getStocks(atmId) {\n    return this.http.get(this.stockUrl + atmId);\n  }\n  getAtmLocationsByPincode(pincode) {\n    return this.http.get(this.pincodeUrl + pincode);\n  }\n  static #_ = this.ɵfac = function ApiService_Factory(t) {\n    return new (t || ApiService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ApiService,\n    factory: ApiService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["Environment","Subject","interval","merge","switchMap","ApiService","constructor","http","serverEndpoint","apiUrl","cartData$","wishCountData$","refreshInterval","stateUrl","cityUrl","locationUrl","stockUrl","pincodeUrl","production","post","endpoint","data","headers","get","params","liveprice","endPoint","pipe","delete","put","getStates","getCities","state","getLocation","user_id","getStock","atmId","getStocks","getAtmLocationsByPincode","pincode","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac","providedIn"],"sources":["C:\\xampp\\htdocs\\goldatm.gold\\src\\app\\api.service.ts"],"sourcesContent":["\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Environment } from '../environments/environment';\r\nimport { BehaviorSubject, Observable, forkJoin, Subject, catchError, interval, merge, switchMap, throwError } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiService {\r\n  serverEndpoint = `${Environment.apiUrl}`;\r\n  public cartData$: Subject<any> = new Subject;\r\n  public wishCountData$: Subject<any> = new Subject;\r\n  private refreshInterval = 1000;\r\n\r\n  constructor(private http: HttpClient) {\r\n    if (Environment.production) {\r\n      this.serverEndpoint = Environment.apiUrl;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param endpoint\r\n   * @param data\r\n   * @param headers\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/ban-types\r\n  post(endpoint: any, data: any, headers?: {}) {\r\n    return this.http.post(this.serverEndpoint + endpoint, data, headers);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param endpoint\r\n   * @param params\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/ban-types\r\n  get(endpoint: string, params?: {}) {\r\n    return this.http.get(this.serverEndpoint + endpoint, params);\r\n  }\r\n  liveprice() {\r\n    const endPoint = `/global/price/list`\r\n    // return this.http.get(this.serverEndpoint + endPoint),interval(this.refreshInterval);\r\n    return merge(this.http.get<any>(this.serverEndpoint + endPoint), interval(this.refreshInterval).pipe(\r\n      switchMap(() => this.http.get<any>(this.serverEndpoint + endPoint))\r\n    ));\r\n  }\r\n\r\n\r\n  /**\r\n   *\r\n   * @param endpoint\r\n   * @param params\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/ban-types\r\n  delete(endpoint: string, params?: {}) {\r\n    return this.http.delete(this.serverEndpoint + endpoint, params);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param endpoint\r\n   * @param params\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/ban-types\r\n  put(endpoint: string, params?: {}) {\r\n    return this.http.put(this.serverEndpoint + endpoint, params);\r\n  }\r\n\r\n  //atm stock \r\n  @Injectable({\r\n    providedIn: 'root'\r\n  })\r\n\r\n\r\n\r\n  // state\r\n  private stateUrl = Environment.stateUrl;\r\n  getStates(): Observable<any> {\r\n    return this.http.get<any>(this.stateUrl);\r\n  }\r\n\r\n  // city\r\n  cityUrl = Environment.cityUrl;\r\n  getCities(state: string): Observable<any> {\r\n    return this.http.get<any>(this.cityUrl + state);\r\n  }\r\n  // location\r\n  locationUrl = Environment.locationUrl;\r\n  getLocation(user_id: string): Observable<any> {\r\n    return this.http.get<any>(this.locationUrl + user_id);\r\n  }\r\n\r\n  // stock\r\n  stockUrl = Environment.stockUrl;\r\n  // getStock(atm_id: string): Observable<any> {\r\n  //   return this.http.get<any>(this.stockUrl+ atm_id);\r\n  // }\r\n\r\n\r\n  getStock(atmId: string): Observable<any> {\r\n    return this.http.get(`${this.stockUrl}${atmId}`);\r\n  }\r\n\r\n  getStocks(atmId:any): Observable<any[]> {\r\n    return this.http.get<any>(this.stockUrl + atmId);\r\n  }\r\n\r\n  // pincode\r\n  pincodeUrl = Environment.pincodeUrl;\r\n  getAtmLocationsByPincode(pincode: string): Observable<any> {\r\n    return this.http.get<any>(this.pincodeUrl + pincode);\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}